# ใบงาน STEM: โปรเจคมินิ Robot Car

## วัตถุประสงค์

เพื่อให้นักเรียนเข้าใจและสามารถเขียนโค้ดควบคุม Robot Car ที่ใช้โมดูล L298N ให้เคลื่อนที่ตามเส้นทางที่กำหนด

## อุปกรณ์

1. Robot Car ที่ประกอบด้วยโมดูล L298N
2. บอร์ด Arduino
3. คอมพิวเตอร์สำหรับเขียนโค้ด
4. สนามจำลองตามที่กำหนดในภาพ

## การเชื่อมต่อโมดูล L298N กับ Arduino

- IN1 เชื่อมต่อกับขาดิจิทัล 2
- IN2 เชื่อมต่อกับขาดิจิทัล 3
- IN3 เชื่อมต่อกับขาดิจิทัล 4
- IN4 เชื่อมต่อกับขาดิจิทัล 5
- ENA เชื่อมต่อกับขาดิจิทัล 9 (PWM)
- ENB เชื่อมต่อกับขาดิจิทัล 10 (PWM)

## เส้นทางที่กำหนด

[ภาพสนามที่มีเส้นทางกำหนดไว้]

คำอธิบายเส้นทาง:

| ขั้นตอน | การเคลื่อนที่ |
| --- | --- |
| 1 |  |
| 2 |  |
| 3 |  |
| 4 |  |
| 5 |  |
| 6 |  |
| 7 |  |

## กิจกรรม

### 1. ทำความเข้าใจฟังก์ชันพื้นฐาน (10 นาที)

ศึกษาฟังก์ชันพื้นฐานต่อไปนี้:

```cpp
// กำหนดขาที่ใช้ควบคุมมอเตอร์
#define IN1 2
#define IN2 3
#define IN3 4
#define IN4 5
#define ENA 9
#define ENB 10

void moveForward(int speed, int duration) {
  digitalWrite(IN1, HIGH);
  digitalWrite(IN2, LOW);
  digitalWrite(IN3, HIGH);
  digitalWrite(IN4, LOW);
  analogWrite(ENA, speed);
  analogWrite(ENB, speed);
  delay(duration);
}

void turnRight(int speed, int duration) {
  digitalWrite(IN1, HIGH);
  digitalWrite(IN2, LOW);
  digitalWrite(IN3, LOW);
  digitalWrite(IN4, HIGH);
  analogWrite(ENA, speed);
  analogWrite(ENB, speed);
  delay(duration);
}

void turnLeft(int speed, int duration) {
  digitalWrite(IN1, LOW);
  digitalWrite(IN2, HIGH);
  digitalWrite(IN3, HIGH);
  digitalWrite(IN4, LOW);
  analogWrite(ENA, speed);
  analogWrite(ENB, speed);
  delay(duration);
}

void stop(int duration) {
  digitalWrite(IN1, LOW);
  digitalWrite(IN2, LOW);
  digitalWrite(IN3, LOW);
  digitalWrite(IN4, LOW);
  analogWrite(ENA, 0);
  analogWrite(ENB, 0);
  delay(duration);
}

```

คำถาม:

1. ฟังก์ชัน moveForward() ควบคุมมอเตอร์อย่างไร?
    
    ฟังก์ชัน moveForward() ควบคุมมอเตอร์โดยการตั้งค่าขา IN1 และ IN3 เป็น_____________และขา IN2 และ IN4 เป็น____________ซึ่งทำให้มอเตอร์ทั้งสองหมุนไปข้างหน้า นอกจากนี้ ยังใช้ analogWrite() เพื่อควบคุมความเร็วของมอเตอร์ผ่านขา________และ _____________โดยค่า speed ที่ส่งเข้าไปจะกำหนดความเร็วในการหมุนของมอเตอร์
    
2. ทำไมฟังก์ชัน turnRight() จึงต้องตั้งค่า IN3 เป็น LOW และ IN4 เป็น HIGH?
    
    การตั้งค่า IN3 เป็น LOW และ IN4 เป็น HIGH ใน turnRight() เป็นการควบคุมให้มอเตอร์ด้านขวาหมุน________________ในขณะที่มอเตอร์ด้านซ้ายยังคงหมุน_____________ (IN1 HIGH, IN2 LOW) ส่งผลให้ Robot Car หมุนตัวไปทางขวา การควบคุมในลักษณะนี้ทำให้รถสามารถเลี้ยวขวาได้อย่างมีประสิทธิภาพ โดยใช้หลักการหมุนแบบแกนหมุน (pivot turn) ซึ่งช่วยให้รถสามารถเลี้ยวได้ในพื้นที่จำกัด
    

### 2. เขียนโค้ดควบคุม Robot Car (20 นาที)

ใช้ฟังก์ชันพื้นฐานที่ให้มา เขียนโค้ดควบคุม Robot Car ให้เคลื่อนที่ตามเส้นทางที่กำหนด:

```cpp
void setup() {
  pinMode(IN1, OUTPUT);
  pinMode(IN2, OUTPUT);
  pinMode(IN3, OUTPUT);
  pinMode(IN4, OUTPUT);
  pinMode(ENA, OUTPUT);
  pinMode(ENB, OUTPUT);
}

void loop() {
  // เขียนโค้ดที่นี่
  // ตัวอย่าง: moveForward(200, 1000); // เดินหน้าด้วยความเร็ว 200 เป็นเวลา 1 วินาที

  // หยุดการทำงานเมื่อถึงจุดหมาย
  while(1) {
    stop(1000);
  }
}

```

### 3. ทดสอบและปรับแต่ง (15 นาที)

1. อัพโหลดโค้ดลงบน Arduino
2. ทดสอบการทำงานบนสนามจำลอง
3. สังเกตและบันทึกผลการทำงาน
4. ปรับแต่งค่า speed และ duration ในแต่ละฟังก์ชันเพื่อให้ Robot Car เคลื่อนที่ได้แม่นยำขึ้น

### 4. บันทึกและสรุปผล (15 นาที)

บันทึกค่า delay ที่ใช้ในแต่ละขั้นตอนของการเคลื่อนที่ลงในตารางต่อไปนี้:

| ขั้นตอน | การเคลื่อนที่ | Delay (ms) | หมายเหตุ |
| --- | --- | --- | --- |
| 1 |  |  |  |
| 2 |  |  |  |
| 3 |  |  |  |
| 4 |  |  |  |
| 5 |  |  |  |
| 6 |  |  |  |
| 7 |  |  |  |
|  |  |  |  |
|  |  |  |  |
|  |  |  |  |
|  |  |  |  |
|  |  |  |  |

สรุปผลการทดลอง:

- ค่า delay ที่เหมาะสมที่สุดสำหรับการเคลื่อนที่ตรง: __________ ms
- ค่า delay ที่เหมาะสมที่สุดสำหรับการเลี้ยวซ้าย: __________ ms
- ค่า delay ที่เหมาะสมที่สุดสำหรับการเลี้ยวขวา: __________ ms

อภิปรายผล: (เขียนข้อสังเกตเกี่ยวกับความแตกต่างของค่า delay ในแต่ละการเคลื่อนที่ และเหตุผลที่อาจเป็นไปได้)

## การประเมินผล

1. ความถูกต้องของโค้ดที่เขียน (40%)
2. ความแม่นยำในการเคลื่อนที่ของ Robot Car (30%)
3. การตอบคำถามและอธิบายแนวคิด (20%)
4. ความคิดสร้างสรรค์ในการแก้ปัญหาและปรับปรุงโค้ด (10%)

| เกณฑ์การประเมิน | คะแนนเต็ม | คะแนนที่ได้ | หมายเหตุ |
| --- | --- | --- | --- |
| ความถูกต้องของโค้ดที่เขียน | 40 |  |  |
| ความแม่นยำในการเคลื่อนที่ของ Robot Car | 30 |  |  |
| การตอบคำถามและอธิบายแนวคิด | 20 |  |  |
| ความคิดสร้างสรรค์ในการแก้ปัญหาและปรับปรุงโค้ด | 10 |  |  |
| รวม | 100 |  |  |
